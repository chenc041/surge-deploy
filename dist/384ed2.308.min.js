(window.webpackJsonp=window.webpackJsonp||[]).push([[308],{1145:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(1166);a.default=function(e){const[a,t]=Object(n.useState)(!1),[s,r]=Object(n.useState)(!1);localStorage.getItem("arco-lang");return l.a.createElement("span",{style:e.style,className:"markdown-body"},l.a.createElement(c.a,null,l.a.createElement("title",null,"文档生成 | ArcoDesign"),l.a.createElement("meta",{name:"description",content:"了解如何自动生成物料 API 文档。"}),l.a.createElement("meta",{property:"og:title",content:"文档生成 | ArcoDesign"}),l.a.createElement("meta",{property:"og:description",content:"了解如何自动生成物料 API 文档。"})),l.a.createElement("div",{className:"ac-nav-intro"},l.a.createElement("p",null,"物料平台"),l.a.createElement("h1",{id:"文档生成"},"文档生成"),l.a.createElement("p",null,"了解如何自动生成物料 API 文档。")),l.a.createElement("p",null,l.a.createElement("em",null,"本文基于 Arco 官方物料模板所创建的项目进行说明")),l.a.createElement("h2",{id:"目录结构"},"目录结构"),l.a.createElement("p",null,"物料文档包含了两个方面：组件 Props 参数和示例代码。通过 arco-scripts，一个完善的物料文档可以被自动生成。首先，物料的 ",l.a.createElement("code",null,"/src")," 目录结构如下："),l.a.createElement("pre",null,l.a.createElement("code",null,"─ ",l.a.createElement("span",{className:"token operator"},"/"),"src",l.a.createElement("br",null),"  ├── __test__",l.a.createElement("br",null),"  ├── TEMPLATE",l.a.createElement("span",{className:"token punctuation"},"."),"md",l.a.createElement("br",null),"  ├── demo",l.a.createElement("br",null),"  │   └── basic",l.a.createElement("span",{className:"token punctuation"},"."),"jsx",l.a.createElement("br",null),"  ├── index",l.a.createElement("span",{className:"token punctuation"},"."),"tsx",l.a.createElement("br",null),"  └── style")),l.a.createElement("p",null,"你需要关注的有 ",l.a.createElement("code",null,"TEMPLATE.md")," 和 ",l.a.createElement("code",null,"demo"),"，在使用 TypeScript 的项目中，arco-scripts 可以通过提取注释内容来快速生成组件接口文档。",l.a.createElement("code",null,"TEMPLATE.md")," 为文档生成的模板。其内容如下："),l.a.createElement("pre",{className:"code_block"},l.a.createElement("code",{className:"language-markdown"},l.a.createElement("span",{className:"token front-matter-block"},l.a.createElement("span",{className:"token punctuation"},"---"),l.a.createElement("br",null),l.a.createElement("span",{className:"token font-matter yaml language-yaml"},l.a.createElement("span",{className:"token key atrule"},"file"),l.a.createElement("span",{className:"token punctuation"},":")," index"),l.a.createElement("br",null),l.a.createElement("span",{className:"token punctuation"},"---")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token title important"},l.a.createElement("span",{className:"token punctuation"},"#")," TooltipButton"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token title important"},l.a.createElement("span",{className:"token punctuation"},"##")," 属性/Props"),l.a.createElement("br",null),l.a.createElement("br",null),"%%Props%%",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token title important"},l.a.createElement("span",{className:"token punctuation"},"##")," Demos"),l.a.createElement("br",null),l.a.createElement("br",null),"%%Demos%%")),l.a.createElement("p",null,"其中 ",l.a.createElement("code",null,"%%Props%%")," 会在 ",l.a.createElement("code",null,"docgen")," 命令之后组件的 ",l.a.createElement("code",null,"Props")," 参数填充，",l.a.createElement("code",null,"%%Demos%%")," 会被 ",l.a.createElement("code",null,"/src/demo")," 中的 Demo 代码填充。最终生成的文档如下："),l.a.createElement("pre",{className:"code_block"},l.a.createElement("code",{className:"language-markdown"},l.a.createElement("span",{className:"token title important"},l.a.createElement("span",{className:"token punctuation"},"#")," TooltipButton"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token title important"},l.a.createElement("span",{className:"token punctuation"},"##")," 属性/Props"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token title important"},l.a.createElement("span",{className:"token punctuation"},"###")," `<TooltipButton>`"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token table"},l.a.createElement("span",{className:"token table-header-row"},l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("span",{className:"token table-header important"}," 参数名 "),l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("span",{className:"token table-header important"},"    描述    "),l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("span",{className:"token table-header important"},"    类型     "),l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("span",{className:"token table-header important"}," 默认值 "),l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("br",null)),l.a.createElement("span",{className:"token table-line"},l.a.createElement("span",{className:"token punctuation"},"|")," ",l.a.createElement("span",{className:"token punctuation"},"------")," ",l.a.createElement("span",{className:"token punctuation"},"|")," ",l.a.createElement("span",{className:"token punctuation"},":--------:")," ",l.a.createElement("span",{className:"token punctuation"},"|")," ",l.a.createElement("span",{className:"token punctuation"},":---------:")," ",l.a.createElement("span",{className:"token punctuation"},"|")," ",l.a.createElement("span",{className:"token punctuation"},"-----:")," ",l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("br",null)),l.a.createElement("span",{className:"token table-data-rows"},l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("span",{className:"token table-data"}," title  "),l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("span",{className:"token table-data"}," 按钮的提示 "),l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("span",{className:"token table-data"}," ",l.a.createElement("span",{className:"token code-snippet code keyword"},"`ReactNode`")," "),l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("span",{className:"token table-data"},"    ",l.a.createElement("span",{className:"token code-snippet code keyword"},"`-`")," "),l.a.createElement("span",{className:"token punctuation"},"|"),l.a.createElement("br",null))),l.a.createElement("br",null),l.a.createElement("span",{className:"token title important"},l.a.createElement("span",{className:"token punctuation"},"##")," Demos"),l.a.createElement("br",null),l.a.createElement("br",null),"~~~jsx",l.a.createElement("br",null),"import React from 'react';",l.a.createElement("br",null),"import TooltipButton from '@arco-design/rc-xxx';",l.a.createElement("br",null),l.a.createElement("br",null),"/*",l.a.createElement("span",{className:"token italic"},l.a.createElement("span",{className:"token punctuation"},"*"),l.a.createElement("span",{className:"token content"},l.a.createElement("br",null)," "),l.a.createElement("span",{className:"token punctuation"},"*"))," 基本用法",l.a.createElement("br",null)," */",l.a.createElement("br",null),"export default () => ","{",l.a.createElement("br",null),"  return ",l.a.createElement("span",{className:"token tag"},l.a.createElement("span",{className:"token tag"},l.a.createElement("span",{className:"token punctuation"},"<"),"TooltipButton")," ",l.a.createElement("span",{className:"token attr-name"},"title"),l.a.createElement("span",{className:"token attr-value"},l.a.createElement("span",{className:"token punctuation attr-equals"},"="),l.a.createElement("span",{className:"token punctuation"},'"'),"tooltip title",l.a.createElement("span",{className:"token punctuation"},'"')),l.a.createElement("span",{className:"token punctuation"},">")),"Demo Basic",l.a.createElement("span",{className:"token tag"},l.a.createElement("span",{className:"token tag"},l.a.createElement("span",{className:"token punctuation"},"</"),"TooltipButton"),l.a.createElement("span",{className:"token punctuation"},">")),";",l.a.createElement("br",null),"}",";",l.a.createElement("br",null),"~~~")),l.a.createElement("h2",{id:"书写注释"},"书写注释"),l.a.createElement("p",null,l.a.createElement("code",null,"docgen")," 命令通过解析 TypeScript interface 中的注释来生成文档，所以需要以 ",l.a.createElement("a",{href:"https://tsdoc.org/"},"TSDoc")," 的形式为 interface 书写注释。"),l.a.createElement("p",null,"arco-scripts 从 ",l.a.createElement("strong",null,"1.23.0")," 开始，提供了两种可选的底层工具（",l.a.createElement("a",{href:"https://www.npmjs.com/package/ts-document"},"ts-document"),", ",l.a.createElement("a",{href:"https://www.npmjs.com/package/react-docgen-typescript"},"react-docgen-typescript"),"）用于 TS 解析，这两种工具对应了两种不同的注释写法。你可以通过修改项目根目录的 ",l.a.createElement("code",null,".config/docgen.config.js")," 来指定工具："),l.a.createElement("pre",{className:"code_block"},l.a.createElement("code",{className:"language-javascript"},l.a.createElement("span",{className:"token comment"},"// .config/docgen.config.js"),l.a.createElement("br",null),"module",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token method-variable function-variable method function property-access"},"exports")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token parameter"},"config"),l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token arrow operator"},"=>")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token spread operator"},"..."),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token comment"},"// ['react-docgen-typescript'] 为默认值"),l.a.createElement("br",null),"  config",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token property-access"},"tsParseTool")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token punctuation"},"["),l.a.createElement("span",{className:"token string"},"'ts-document'"),l.a.createElement("span",{className:"token punctuation"},"]"),l.a.createElement("br",null),l.a.createElement("span",{className:"token punctuation"},"}"))),l.a.createElement("p",null,"我们",l.a.createElement("strong",null,"推荐"),"使用 ",l.a.createElement("code",null,"ts-document"),"，其为 Arco 自研工具，具有更好的语法兼容性和双语言支持。在你阅读此文档时，所有新创建的物料项目已经默认使用 ",l.a.createElement("code",null,"ts-document")," 进行 API 参数提取。"),l.a.createElement("p",null,"在 Arco 官方物料模板所创建的项目中，你不必费心地去处理文档生成，我们会在 ",l.a.createElement("code",null,"npm publish")," 之前生成一份最新的文档并将其上传至 NPM。"),l.a.createElement("h3",{id:"使用-ts-document"},"使用 ts-document"),l.a.createElement("p",null,"用以下方式书写注释，所有带有 ",l.a.createElement("code",null,"@title")," 的 interface 或者 type 声明都会被提取。属性注释有以下可用的 tag："),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"@zh")," 属性的中文描述"),l.a.createElement("li",null,l.a.createElement("code",null,"@en")," 属性的英文描述 （可选）"),l.a.createElement("li",null,l.a.createElement("code",null,"@defaultValue")," 属性的默认值 （可选）"),l.a.createElement("li",null,l.a.createElement("code",null,"@version")," 该属性是从哪个版本新增的 （可选）")),l.a.createElement("p",null,"当 ",l.a.createElement("code",null,"@zh")," 或者 ",l.a.createElement("code",null,"@en")," 缺失时，",l.a.createElement("code",null,"/** Some comment */")," 中的内容会被提取作为属性的描述。"),l.a.createElement("pre",{className:"code_block"},l.a.createElement("code",{className:"language-typescript"},l.a.createElement("span",{className:"token doc-comment comment"},"/**",l.a.createElement("br",null)," * ",l.a.createElement("span",{className:"token keyword"},"@title")," Button (必填，带有 `title` 描述的接口或者类型才会被收集)",l.a.createElement("br",null)," */"),l.a.createElement("br",null),l.a.createElement("span",{className:"token keyword"},"interface")," ",l.a.createElement("span",{className:"token class-name"},"ButtonProps")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token doc-comment comment"},"/**",l.a.createElement("br",null),"   * ",l.a.createElement("span",{className:"token keyword"},"@zh")," 按钮尺寸 (属性的中文描述)",l.a.createElement("br",null),"   * ",l.a.createElement("span",{className:"token keyword"},"@en")," Size of Button (可选，属性的英文描述)",l.a.createElement("br",null),"   * ",l.a.createElement("span",{className:"token keyword"},"@version")," 1.2.0 (可选，新增的属性在哪个版本开始支持)",l.a.createElement("br",null),"   * ",l.a.createElement("span",{className:"token keyword"},"@defaultValue")," 'default' (可选，属性的默认值)",l.a.createElement("br",null),"   */"),l.a.createElement("br",null),"  size",l.a.createElement("span",{className:"token operator"},"?"),l.a.createElement("span",{className:"token operator"},":")," ",l.a.createElement("span",{className:"token string"},"'mini'")," ",l.a.createElement("span",{className:"token operator"},"|")," ",l.a.createElement("span",{className:"token string"},"'small'")," ",l.a.createElement("span",{className:"token operator"},"|")," ",l.a.createElement("span",{className:"token string"},"'default'")," ",l.a.createElement("span",{className:"token operator"},"|")," ",l.a.createElement("span",{className:"token string"},"'large'"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token doc-comment comment"},"/**",l.a.createElement("br",null),"   * ",l.a.createElement("span",{className:"token keyword"},"@zh")," 按钮状态",l.a.createElement("br",null),"   * ",l.a.createElement("span",{className:"token keyword"},"@en")," Status of Button",l.a.createElement("br",null),"   */"),l.a.createElement("br",null),"  status",l.a.createElement("span",{className:"token operator"},"?"),l.a.createElement("span",{className:"token operator"},":")," ",l.a.createElement("span",{className:"token string"},"'danger'")," ",l.a.createElement("span",{className:"token operator"},"|")," ",l.a.createElement("span",{className:"token string"},"'error'")," ",l.a.createElement("span",{className:"token operator"},"|")," ",l.a.createElement("span",{className:"token string"},"'success'"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("span",{className:"token punctuation"},"}"))),l.a.createElement("p",null,"如要生成双语言的文档，可对 ",l.a.createElement("code",null,"docgen.config.js")," 进行如下配置："),l.a.createElement("pre",{className:"code_block"},l.a.createElement("code",{className:"language-javascript"},l.a.createElement("span",{className:"token comment"},"// .config/docgen.config.js"),l.a.createElement("br",null),"module",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token method-variable function-variable method function property-access"},"exports")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token parameter"},"config"),l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token arrow operator"},"=>")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"  config",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token property-access"},"tsParseTool")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token punctuation"},"["),l.a.createElement("span",{className:"token string"},"'ts-document'"),l.a.createElement("span",{className:"token punctuation"},"]"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),"  config",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token property-access"},"languages")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token punctuation"},"["),l.a.createElement("span",{className:"token string"},"'zh-CN'"),l.a.createElement("span",{className:"token punctuation"},",")," ",l.a.createElement("span",{className:"token string"},"'en-US'"),l.a.createElement("span",{className:"token punctuation"},"]"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token comment"},"// 需分别准备 TEMPLATE.zh-CN.md 和 TEMPLATE.en-US.md 两份文件"),l.a.createElement("br",null),"  config",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token property-access"},"template")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token string"},"'TEMPLATE.[language].md'"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token comment"},"// 也可中英文共用同一份模板文件（默认值）"),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token comment"},"// config.template = 'TEMPLATE.md';"),l.a.createElement("br",null),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token comment"},"// 将输出 README.zh-CN.md 和 README.en-US.md 两份文件"),l.a.createElement("br",null),"  config",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token property-access"},"outputFileName")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token string"},"'README.[language].md'"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token punctuation"},"}"))),l.a.createElement("h3",{id:"使用-react-docge-typescript"},"使用 react-docge-typescript"),l.a.createElement("p",null,"使用如下方式书写注释，需要注意以下方面："),l.a.createElement("ul",null,l.a.createElement("li",null,"必须以 TSDoc 的形式书写注释（// 形式的单行注释无法被提取）"),l.a.createElement("li",null,"需要被提取文档的组件必须以 ",l.a.createElement("code",null,"export const Component = (props: ComponentProps) => ","{","}")," 的形式额外导出，否则不能被工具识别；"),l.a.createElement("li",null,"默认值必须以 ",l.a.createElement("code",null,"Component.defaultProps = ","{","}")," 的形式书写，才能被工具提取。"),l.a.createElement("li",null,"如遇到其他问题，可参考 ",l.a.createElement("a",{href:"https://github.com/styleguidist/react-docgen-typescript/"},"react-docgen-typescript")," 仓库。")),l.a.createElement("pre",{className:"code_block"},l.a.createElement("code",{className:"language-typescript"},l.a.createElement("span",{className:"token keyword"},"interface")," ",l.a.createElement("span",{className:"token class-name"},"ButtonProps")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token doc-comment comment"},"/**",l.a.createElement("br",null),"   * 按钮尺寸",l.a.createElement("br",null),"   */"),l.a.createElement("br",null),"  size",l.a.createElement("span",{className:"token operator"},"?"),l.a.createElement("span",{className:"token operator"},":")," ",l.a.createElement("span",{className:"token string"},"'mini'")," ",l.a.createElement("span",{className:"token operator"},"|")," ",l.a.createElement("span",{className:"token string"},"'small'")," ",l.a.createElement("span",{className:"token operator"},"|")," ",l.a.createElement("span",{className:"token string"},"'default'")," ",l.a.createElement("span",{className:"token operator"},"|")," ",l.a.createElement("span",{className:"token string"},"'large'"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token doc-comment comment"},"/**",l.a.createElement("br",null),"   * 按钮状态",l.a.createElement("br",null),"   */"),l.a.createElement("br",null),"  status",l.a.createElement("span",{className:"token operator"},"?"),l.a.createElement("span",{className:"token operator"},":")," ",l.a.createElement("span",{className:"token string"},"'danger'")," ",l.a.createElement("span",{className:"token operator"},"|")," ",l.a.createElement("span",{className:"token string"},"'error'")," ",l.a.createElement("span",{className:"token operator"},"|")," ",l.a.createElement("span",{className:"token string"},"'success'"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token comment"},"// 需要将 Button 以 const 声明，并且 export，否则工具可能识别不到"),l.a.createElement("br",null),l.a.createElement("span",{className:"token keyword"},"export")," ",l.a.createElement("span",{className:"token keyword"},"const")," ",l.a.createElement("span",{className:"token function-variable function"},"Button")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token punctuation"},"("),"props",l.a.createElement("span",{className:"token operator"},":")," ButtonProps",l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token operator"},"=>")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token operator"},"..."),l.a.createElement("br",null),l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token comment"},"// 只有用 defaultProps 声明的默认值才能被工具提取"),l.a.createElement("br",null),"Button",l.a.createElement("span",{className:"token punctuation"},"."),"defaultProps ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"  size",l.a.createElement("span",{className:"token operator"},":")," ",l.a.createElement("span",{className:"token string"},"'default'"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token keyword"},"export")," ",l.a.createElement("span",{className:"token keyword"},"default")," Button",l.a.createElement("span",{className:"token punctuation"},";"))),l.a.createElement("p",null,l.a.createElement("strong",null,"react-docgen-typescript 方式不支持自动生成中/英两种文档，需要手动处理。")))}}}]);