(window.webpackJsonp=window.webpackJsonp||[]).push([[329],{1126:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),c=t(1166);a.default=function(e){const[a,t]=Object(n.useState)(!1),[l,o]=Object(n.useState)(!1);localStorage.getItem("arco-lang");return s.a.createElement("span",{style:e.style,className:"markdown-body"},s.a.createElement(c.a,null,s.a.createElement("title",null,"Routing and menu | ArcoDesign"),s.a.createElement("meta",{name:"description",content:"Route and menu generation."}),s.a.createElement("meta",{property:"og:title",content:"Routing and menu | ArcoDesign"}),s.a.createElement("meta",{property:"og:description",content:"Route and menu generation."})),s.a.createElement("div",{className:"ac-nav-intro"},s.a.createElement("p",null,"Arco Pro"),s.a.createElement("h1",{id:"routing-and-menu"},"Routing and menu"),s.a.createElement("p",null,"Route and menu generation.")),s.a.createElement("p",null,s.a.createElement("em",null,"Auto translate by google.")),s.a.createElement("p",null,"Routing is usually tied to the menu. In order to reduce the amount of maintenance, we directly generate the menu through the routing table."),s.a.createElement("h2",{id:"routing"},"Routing"),s.a.createElement("p",null,"First of all, you need to understand the routing table configuration"),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-js"},s.a.createElement("span",{className:"token comment"},"// src/routes.ts"),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword module"},"export")," ",s.a.createElement("span",{className:"token keyword"},"const")," routes ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"    name",s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'menu.dashboard'"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token comment"},"// Menu name, locale['menu.dashboard']"),s.a.createElement("br",null),"    key",s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'dashboard'"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token comment"},"// menu item key, also menu path"),s.a.createElement("br",null),"    children",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"        name",s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'menu.dashboard.workplace'"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token comment"},"// Menu name, locale['menu.dashboard.workplace']"),s.a.createElement("br",null),"        key",s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'dashboard/workplace'"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token comment"},"// menu item key, also menu path"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},";"))),s.a.createElement("p",null,"Explain some of the variables:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("code",null,"name")," The name of the menu item, which is the key value in the language pack"),s.a.createElement("li",null,s.a.createElement("code",null,"key")," The key of the menu item, also used as path, here will use ",s.a.createElement("code",null,"pages/$","{","route.key","}")," as the component path"),s.a.createElement("li",null,s.a.createElement("code",null,"children")," sub-menu array, each field is the same as the parent menu"),s.a.createElement("li",null,s.a.createElement("code",null,"breadcrumb")," whether to display breadcrumbs on the current page")),s.a.createElement("p",null,"The routing configuration is very intuitive. The configured variables are used to generate the menu and process the routing jump. Next, let's look at how the menu and the routing are connected in series."),s.a.createElement("h2",{id:"menu"},"menu"),s.a.createElement("p",null,"The menu bar is part of the layout, so the menu generation process can be found in the layout component:"),s.a.createElement("ol",null,s.a.createElement("li",null,"Obtain a flat array of routes with routing components ",s.a.createElement("code",null,"flattenRoutes")," through ",s.a.createElement("code",null,"getFlattenRoutes"),", which is used to generate routes")),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-js"},s.a.createElement("span",{className:"token keyword"},"function")," ",s.a.createElement("span",{className:"token function"},"getFlattenRoutes"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"const")," res ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"function")," ",s.a.createElement("span",{className:"token function"},"travel"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token parameter"},"_routes"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"    _routes",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token method function property-access"},"forEach"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token parameter"},"route"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token arrow operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token keyword control-flow"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),"route",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"key")," ",s.a.createElement("span",{className:"token operator"},"&&")," ",s.a.createElement("span",{className:"token operator"},"!"),"route",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"children"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"        route",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"component")," ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token function"},"lazyload"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token arrow operator"},"=>")," ",s.a.createElement("span",{className:"token keyword module"},"import"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token template-string"},s.a.createElement("span",{className:"token template-punctuation string"},"`"),s.a.createElement("span",{className:"token string"},"./pages/"),s.a.createElement("span",{className:"token interpolation"},s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"$","{"),"route",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"key"),s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"}")),s.a.createElement("span",{className:"token template-punctuation string"},"`")),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"        res",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token method function property-access"},"push"),s.a.createElement("span",{className:"token punctuation"},"("),"route",s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"}")," ",s.a.createElement("span",{className:"token keyword control-flow"},"else")," ",s.a.createElement("span",{className:"token keyword control-flow"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token function"},"isArray"),s.a.createElement("span",{className:"token punctuation"},"("),"route",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"children"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"&&")," route",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"children"),s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"length"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"token function"},"travel"),s.a.createElement("span",{className:"token punctuation"},"("),"route",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"children"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token function"},"travel"),s.a.createElement("span",{className:"token punctuation"},"("),"routes",s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword control-flow"},"return")," res",s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"}"))),s.a.createElement("ol",{start:"2"},s.a.createElement("li",null,"Generate menu items by traversing the routing table through ",s.a.createElement("code",null,"flattenRoutes"))),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-js"},s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token punctuation"},"<"),s.a.createElement("span",{className:"token class-name"},"Switch")),s.a.createElement("span",{className:"token punctuation"},">")),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"{"),"flattenRoutes",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token method function property-access"},"map"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token parameter"},"route"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token arrow operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token keyword control-flow"},"return")," ",s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token punctuation"},"<"),s.a.createElement("span",{className:"token class-name"},"Route"))," ",s.a.createElement("span",{className:"token attr-name"},"key"),s.a.createElement("span",{className:"token script language-javascript"},s.a.createElement("span",{className:"token script-punctuation punctuation"},"="),s.a.createElement("span",{className:"token punctuation"},"{"),"route",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"key"),s.a.createElement("span",{className:"token punctuation"},"}"))," ",s.a.createElement("span",{className:"token attr-name"},"path"),s.a.createElement("span",{className:"token script language-javascript"},s.a.createElement("span",{className:"token script-punctuation punctuation"},"="),s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("span",{className:"token template-string"},s.a.createElement("span",{className:"token template-punctuation string"},"`"),s.a.createElement("span",{className:"token string"},"/"),s.a.createElement("span",{className:"token interpolation"},s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"$","{"),"route",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"key"),s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"}")),s.a.createElement("span",{className:"token template-punctuation string"},"`")),s.a.createElement("span",{className:"token punctuation"},"}"))," ",s.a.createElement("span",{className:"token attr-name"},"component"),s.a.createElement("span",{className:"token script language-javascript"},s.a.createElement("span",{className:"token script-punctuation punctuation"},"="),s.a.createElement("span",{className:"token punctuation"},"{"),"route",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token property-access"},"component"),s.a.createElement("span",{className:"token punctuation"},"}"))," ",s.a.createElement("span",{className:"token punctuation"},"/>")),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token punctuation"},"<"),s.a.createElement("span",{className:"token class-name"},"Redirect"))," ",s.a.createElement("span",{className:"token attr-name"},"push")," ",s.a.createElement("span",{className:"token attr-name"},"to"),s.a.createElement("span",{className:"token script language-javascript"},s.a.createElement("span",{className:"token script-punctuation punctuation"},"="),s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("span",{className:"token template-string"},s.a.createElement("span",{className:"token template-punctuation string"},"`"),s.a.createElement("span",{className:"token string"},"/"),s.a.createElement("span",{className:"token interpolation"},s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"$","{"),"defaultRoute",s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"}")),s.a.createElement("span",{className:"token template-punctuation string"},"`")),s.a.createElement("span",{className:"token punctuation"},"}"))," ",s.a.createElement("span",{className:"token punctuation"},"/>")),s.a.createElement("br",null),s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token punctuation"},"</"),s.a.createElement("span",{className:"token class-name"},"Switch")),s.a.createElement("span",{className:"token punctuation"},">")))),s.a.createElement("h2",{id:"steps-to-add-a-menu-item"},"Steps to add a menu item"),s.a.createElement("p",null,"After understanding the routing and menu generation, you can start configuring a new menu item. Take a new monitoring page as an example."),s.a.createElement("ol",{start:"3"},s.a.createElement("li",null,"Add a monitor folder in pages and add index.tsx to it")),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-js"},s.a.createElement("span",{className:"token comment"},"// src/pages/monitor/index.tsx"),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword module"},"import")," ",s.a.createElement("span",{className:"token imports"},s.a.createElement("span",{className:"token maybe-class-name"},"React"))," ",s.a.createElement("span",{className:"token keyword module"},"from"),s.a.createElement("span",{className:"token string"},"'react'"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword module"},"export")," ",s.a.createElement("span",{className:"token keyword module"},"default")," ",s.a.createElement("span",{className:"token keyword"},"function")," ",s.a.createElement("span",{className:"token function"},s.a.createElement("span",{className:"token maybe-class-name"},"Monitor")),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword control-flow"},"return")," ",s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token punctuation"},"<"),"div"),s.a.createElement("span",{className:"token punctuation"},">")),s.a.createElement("span",{className:"token maybe-class-name"},"Monitoring")," page",s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token tag"},s.a.createElement("span",{className:"token punctuation"},"</"),"div"),s.a.createElement("span",{className:"token punctuation"},">")),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"}"))),s.a.createElement("ol",{start:"4"},s.a.createElement("li",null,"Add the routing configuration of the monitoring page in the routing table")),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-js"},s.a.createElement("span",{className:"token comment"},"// src/routes.ts"),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword module"},"export")," ",s.a.createElement("span",{className:"token keyword"},"const")," routes ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"    name",s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'menu.dashboard'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"    key",s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'dashboard'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"    children",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"        name",s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'menu.dashboard.workplace'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"        key",s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'dashboard/workplace'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),s.a.createElement("span",{className:"token operator"},"+"),"     ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),s.a.createElement("span",{className:"token operator"},"+"),"       name",s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'menu.dashboard.monitor'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),s.a.createElement("span",{className:"token operator"},"+"),"       key",s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'dashboard/monitor'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),s.a.createElement("span",{className:"token operator"},"+"),"     ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},";"))),s.a.createElement("ol",{start:"5"},s.a.createElement("li",null,"Add a new menu name in the language pack")),s.a.createElement("p",null,"The following is the Chinese language pack, other language packs will not be repeated."),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-js"},s.a.createElement("span",{className:"token comment"},"// src/local/zh-CN.ts"),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword module"},"export")," ",s.a.createElement("span",{className:"token keyword module"},"default")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token string"},"'menu.dashboard'"),s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'Dashboard'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token string"},"'menu.dashboard.workplace'"),s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'Workbench'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),s.a.createElement("span",{className:"token operator"},"+")," ",s.a.createElement("span",{className:"token string"},"'menu.dashboard.monitor'"),s.a.createElement("span",{className:"token operator"},":"),s.a.createElement("span",{className:"token string"},"'Real-time monitoring'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"}"))),s.a.createElement("p",null,"Above, the configuration of a menu item is completed. Now refresh the page to see the new menu item."))}}}]);